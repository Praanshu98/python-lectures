<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.14 (458265)"/><meta name="author" content="Anant Mittal"/><meta name="created" content="2020-01-31 04:54:00 +0000"/><meta name="updated" content="2020-11-21 06:51:20 +0000"/><title>Web Development</title></head><body><div><br/></div><div>Download the sublime text editor and chrome extension called JSONView. Also, learn how to show hidden files on Windows and Mac, search it over internet. Now, we will open the whole project in sublime.</div><div><br/></div><div>Let's create a new file in Sublime. Let's call it "app.py". Remember to save the files manually.</div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>print("Hello")</div></div><div><br/></div><div>Type "ls" or "dir" to check the content of folder.</div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>python app.py</div></div><div><br/></div><hr/><div><br/></div><div><span style="font-weight: bold;">Flask Basics (Chatting App)</span></div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>from flask import Flask, jsonify, request</div><div>app = Flask(__name__)</div></div><div><br/></div><div>If this file is getting directly run from the terminal, by default  __name__ will be set to __main__ . Otherwise, if we are importing this file in some other Python script, then it will different. We will get to see it's importance later.</div><div><br/></div><div>The code that we are writing  on the app.py script will be the back-end code. </div><div><br/></div><div><br/></div><div><img src="Web%20Development.html.resources/image_1.png" height="211" width="172"/><br/></div><div><br/></div><div>Although, we are writing this code locally, we deploy it on the server later. We will now have to tell the server what all it needs to do when it receives requests from the client.</div><hr/><div><span style="font-weight: bold;">Function Decorator</span></div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>@app.route('/')</div><div>def hello():</div><div>    return "Hello"</div></div><div><br/></div><div>Inside the route(), we mention one of the end-points. Let's say that the server is hosted at domain, "www.example.com". We need to say "/" to go the home page.</div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>@app.route('/')</div><div>def hello():</div><div>    return "Hello"</div><div><br/></div><div>if __name__ == "__main__":</div><div>    app.run() # runs the server</div></div><div><br/></div><div>This time, when run this file from terminal, you will notice that it shows some link which says that this app is running at some local host domain.</div><hr/><div>Let's try changing at the end-point. But you will have to re-start the server again.</div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>@app.route('/hello')</div><div>def hello():</div><div>    return "Hello"</div><div><br/></div><div>if __name__ == "__main__":</div><div>    app.run() # runs the server</div></div><div><br/></div><div>You will get an error message because you don't have an end-point corresponding to the home-page.</div><hr/><div><span style="font-weight: bold;">Creating our own API</span></div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>@app.route('/hello')</div><div>def hello():</div><div>    return "Hello"</div><div><br/></div><div>users = [</div><div>{'id':2, 'name':'Anne', 'age':20}, {'id':1, 'name':'Cathy', 'age':21}]</div><div><br/></div><div>@app.route('/users/')</div><div>def getUsers():</div><div>    return jsonify(users) # because you can only send a string</div><div><br/></div><div>if __name__ == "__main__":</div><div>    app.run() # runs the server</div></div><div><br/></div><hr/><div><br/></div><div><span style="font-weight: bold;">Creating dynamic routes, search by ID</span></div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>@app.route('/hello')</div><div>def hello():</div><div>    return "Hello"</div><div><br/></div><div>users = [</div><div>{'id':2, 'name':'Anne', 'age':20}, {'id':1, 'name':'Cathy', 'age':21}]</div><div><br/></div><div>@app.route('/users/&lt;id&gt;')</div><div>def getUser(id):</div><div>    result = [u for u in users if u['id']==id]</div><div>    result = list(filter(lambda u: u['id']==id, users))) # check the data type here, remember input()</div><div>    return jsonify(result)</div><div><br/></div><div>if __name__ == "__main__":</div><div>    app.run() # runs the server</div></div><div><br/></div><hr/><div><br/></div><div><span style="font-weight: bold;">HTML endpoint</span></div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>app.route('/hello')</div><div>def hello():</div><div>    return "Hello"</div><div><br/></div><div>app = Flask(__name__, static_url_path="static")</div><div><br/></div><div>users = [</div><div>{'id':2, 'name':'Anne', 'age':20}, {'id':1, 'name':'Cathy', 'age':21}]</div><div><br/></div><div>@app.route('/users/&lt;id&gt;')</div><div>def getUser(id):</div><div>    result = [u for u in users if u['id']==id]</div><div>    result = list(filter(lambda u: u['id']==id, users))) # check the data type here, remember input()</div><div>    return jsonify(result)</div><div><br/></div><div>@app.route('/')</div><div>def index():</div><div>    # TODO</div><div>    return app.send_static_file('index.html")</div><div><br/></div><div>if __name__ == "__main__":</div><div>    app.run() # runs the server</div></div><div><br/></div><div>Although, we could create a big HTML string in the function itself, but we will rather generate a static HTML file and read the content of it in a variable and then return it. For this, we will create a folder called "static" and store an HTML file in that folder. We will create file called index.html and we will try writing "html" to that press tab for sublime to help us in writing a basic HTML page.</div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>&lt;html&gt;</div><div>&lt;head&gt;</div><div>    &lt;title&gt;Chat App&lt;/title&gt;</div><div>&lt;/head&gt;</div><div>&lt;body&gt;</div><div>    &lt;h1&gt;Coding Elements chatting App&lt;/h1&gt;</div><div>&lt;/body&gt;</div><div>&lt;/html&gt;</div></div><div><br/></div><div>Now, if we change the HTML content, we don't need to re-start the server.</div><div><br/></div><hr/><div><br/></div><div><span style="font-weight: bold;">Another end-point, search by some other variable</span></div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>app.route('/hello')</div><div>def hello():</div><div>    return "Hello"</div><div><br/></div><div>app = Flask(__name__, static_url_path="static")</div><div><br/></div><div>users = [</div><div>{'id':2, 'name':'Anne', 'age':20}, {'id':1, 'name':'Cathy', 'age':21}]</div><div><br/></div><div>@app.route('/users/&lt;id&gt;')</div><div>def getUser(id):</div><div>    result = [u for u in users if u['id']==id]</div><div>    result = list(filter(lambda u: u['id']==id, users))) # check the data type here, remember input()</div><div>    return jsonify(result)</div><div><br/></div><div>@app.route('/users/&lt;name&gt;')</div><div>def getUser(name):</div><div>    result = [u for u in users if u['id']==id]</div><div>    result = list(filter(lambda u: u['id']==id, users))) # check the data type here, remember input()</div><div>    return jsonify(result)</div><div><br/></div><div>@app.rounte('/')</div><div>def index():</div><div>    # TODO</div><div>    return app.send_static_file('index.html")</div><div><br/></div><div>if __name__ == "__main__":</div><div>    app.run() # runs the server</div></div><div><br/></div><div>If you try doing something like this, this won't work as it will be still mapped to the first function. One of doing this could be as follows.</div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>@app.route('/users/name/&lt;name&gt;')</div><div>@app.route('/users/id/&lt;id&gt;')</div></div><div><br/></div><hr/><div><br/></div><div><span style="font-weight: bold;">Adding Javascript code</span></div><div><br/></div><div>Create a file called main.js </div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>&lt;html&gt;</div><div>&lt;head&gt;</div><div>    &lt;title&gt;Chat App&lt;/title&gt;</div><div>&lt;/head&gt;</div><div>&lt;body&gt;</div><div>    &lt;h1&gt;Coding Elements chatting App&lt;/h1&gt;</div><div>    &lt;script src="static/main.js"&gt;&lt;/script&gt;</div><div>&lt;/body&gt;</div><div>&lt;/html&gt;</div></div><div><br/></div><div>Now, we will read some Javascript code. It will be very easy to pick-up.</div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>console.log("hello") # similar to print in Python, this shows the on the developer console</div><div><br/></div><div>var x = 5</div><div>if (x&gt;2)</div><div>{</div><div>    console.log('greater')</div><div>}</div><div>else</div><div>{</div><div>    console.log('smaller')</div><div>}</div><div><br/></div><div>function area(l, b)</div><div>{</div><div>    a = l * b</div><div>    return a</div><div>}</div><div><br/></div><div>a1 = area(4, 5)</div><div><br/></div><div>for (var i=1; i,=5;i+=1)</div><div>{</div><div>    console.log(i)</div><div>}</div></div><div><br/></div><div>We may have to do a <span style="font-weight: bold;">hard reload </span>to see the new changes appearing.</div><hr/><div><br/></div><div><span style="font-weight: bold;">JS Fetch (Ajax)</span></div><div>Now, we want Javascript to create fetching like calls.</div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>function fetchUsers()</div><div>{</div><div>    fetch('/users').then(function(response){</div><div>        response.json().then(function(data)</div><div>    {</div><div>        console.log(data}</div><div>    })</div><div>}</div></div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>&lt;html&gt;</div><div>&lt;head&gt;</div><div>    &lt;title&gt;Chat App&lt;/title&gt;</div><div>&lt;/head&gt;</div><div>&lt;body&gt;</div><div>    &lt;h1&gt;Coding Elements chatting App&lt;/h1&gt;</div><div>    &lt;script src="static/main.js"&gt;&lt;/script&gt; </div><div>    &lt;button onClick="fetchUsers()"&gt;Get Users&lt;/button&gt;</div><div>&lt;/body&gt;</div><div>&lt;/html&gt;</div></div><div><br/></div><div>Notice that the front-end code is written in HTML and Javascript and the back-end code is written in Python. The output of whatever you do in the Python file will be shown on the terminal and output of whatever you do in JS file will be shown in the developer console. Although, the HTML and JS files are stored on the server, they run on the client-side.</div><hr/><div><br/></div><div><span style="font-weight: bold;">Web Sockets</span></div><div><br/></div><div><img src="Web%20Development.html.resources/image.png" height="302" width="318"/><br/></div><div><br/></div><div>B in this case will have to keep sending the request to the server to check if new message has come which is quite inefficient both for B and server. Long Polling is final method that we will use in which server will hold the Bs request and close this request when A sends a message for B. But we will talk about Web Sockets for now. In this case, the server won't have to hold B's request. Instead, there will be a persistent connection between the server and the client and both sends the message to each other whenever required. It's a two way persistent connection. </div><div><br/></div><hr/><div><span style="font-weight: bold;">SocketIO Setup</span></div><div><br/></div><div>SocketIO is one the most popular package for making sockets but since we are using Flask, we will use the Flask version of SocketIO API. Google search for Google-SocketIO flask.</div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>!pip3 install flask-socketio #first activate the virtual environment</div><div>!pip3 freeze # check socket-io dependencies</div></div><div><br/></div><div>Mention about the "eventlet" package. We won’t install it now.</div><div><br/></div><hr/><div><br/></div><div>Adding socket IO in the backend</div><div><br/></div><div style="--en-codeblock:  true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div>from flask import Flask, jsonify, request</div><div>from flask_socketio import SocketIO</div><div><br/></div><div>app = Flask(__name__)</div><div>app.config['SECRET_KEY'] = ’secret' # completely optional</div><div><br/></div><div>socketio = SocketIO(app)</div><div><br/></div><div>@app.route('/hello')</div><div>def hello():</div><div>    return "Hello"</div><div><br/></div><div>users = [</div><div>{'id':2, 'name':'Anne', 'age':20}, {'id':1, 'name':'Cathy', 'age':21}]</div><div><br/></div><div>@app.route('/users/')</div><div>def getUsers():</div><div>    return jsonify(users) # because you can only send a string</div><div><br/></div><div>if __name__ == "__main__":</div><div>    socketio.run(app) # runs the server</div></div><div><br/></div><hr/><div>Now, we also have to the add the Socket IO support in the front-end.</div><div><br/></div><div>Copy the first script and come back to index.html and paste it inside the head tag</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>&lt;html&gt;</div><div>&lt;head&gt;</div><div>    &lt;title&gt;Chat App&lt;/title&gt;</div><div>    &lt;script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" integrity="sha256-yr4fRk/GU1ehYJPAs8P4JlTgu0Hdsp4ZKrx8bDEDC3I=" crossorigin="anonymous"&gt;&lt;/script&gt;</div><div>&lt;/head&gt;</div></div><div><br/></div><div>We can at the protocal here - https:</div><div><br/></div><div>Copy this link and try pasting it in the browser. This is the Javascript code for socketio.</div><div><br/></div><div>Copy and add the second script tag to index.html, but we can just copy the javascript part inside the script tag. Because we have a separate file called main.js for that. We can paste this in main.js.</div><hr/><div><br/></div><div>The documentation has full code for how to send and receive messages using socketio but I will run just write the code necessary for chatting app.</div><div><br/></div><div><b>SocketIO client</b></div><div><b><br/></b></div><div>Lets try understanding whats written in the javascript code.</div><div><br/></div><div><img src="Web%20Development.html.resources/EA105921-FC50-4D41-A5BE-4636C1DD83B1.png" height="214" width="440"/></div><div><br/></div><div>We won’t use any of it. We will add one button to the front-end.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>&lt;button onClick="send()"&gt;Send()&lt;/button&gt;</div></div><div><br/></div><div>We will add the code for send() in main.js.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>function send()</div><div>{</div><div>    # have to pass two values, key and value</div><div>    socket.emit("msg", "Hello")</div><div>}</div></div><div><br/></div><div>Now, we need to tell the server, how to receive the message.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div># this is similar to onconnect or onclick, all of these are called listener</div><div>@socketio.on("msg")</div><div>def handle_msg(data):</div><div>    print(data)</div></div><div><br/></div><hr/><div><br/></div><div><b>Socket-io Broadcasting</b></div><div><b><br/></b></div><div>Now we want the server to broadcast the message to other client which is sent by A.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>@socketio.on("msg")</div><div>def handle_msg(data):</div><div>    print(data)</div><div>    socketio.emit("push", data, broadcast=True, include_self=False)</div></div><div><br/></div><div>Now clients should have a way to receive the message as well. So we add the code for that in main.js. We will use socket.on(), “on” gives you a hint that it is a listener.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>socket.on(‘push’, function(data){</div><div><span style="font-size: 12px; font-family: Monaco;"><span>    console.log(data)</span><br/></span></div><div>})</div></div><br/><hr/><div><br/></div><div><b>Input Box</b></div><div><b><br/></b></div><div>Lets create an input box, the id that we use in index.html should match with one in Javscript.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>&lt;input id="msgBox"&gt;&lt;/input&gt;</div></div><div><br/></div><div>Lets add support for reading the message from input box in main.js</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>function send(){</div><div>    var msgInBox = document.getElementById('msgBox')</div><div>    socket.emit('msg', msgInBox.value)</div><div>    console.log("Server should print the message”)</div><div>}</div></div><div><br/></div><div>Now, we would want the input box to get empty as soon as the “send” button is clicked.</div><div><br/></div><hr/><div><br/></div><div>Now, we would want to display the message on the web page instead of developer console.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>&lt;div id="msgList"&gt;&lt;/div&gt;</div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>msgList.innerHTML += "&lt;p&gt;" + data + "&lt;/p&gt;”</div></div><div><br/></div><hr/><div><br/></div><div><b>Preparation for deployment on Heroku</b></div><div><br/></div><div>We need to tell the server which type of app it is, so we will create a file under ChatApp folder which is called runtime.txt<br/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>python-3.6.6</div></div><div><br/></div><div>Now, we need to tell te server what other package we need to add. We will create another file under ChatApp called requirements .txt. We can do that using simple command called pip freeze.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>Flask</div><div>Flask-SocketIO</div><div>gunicorn</div><div>eventlet</div></div><div><br/></div><div>Eventlet is a worker used by gunicorn web server.</div><div><br/></div><hr/><div><br/></div><div>Now we need to tell the server how to start the app. We have to create file called Procfile without any extension. You can findin the flask socketio documentation.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>web: gunicorn --worker-class eventlet -w 1 module:app</div></div><div><br/></div><hr/><div><br/></div><div>Search for getting started with deploying python app on heroku. You can create an account on Heroku and start with Python app.</div><div><br/></div><div><img src="Web%20Development.html.resources/B312387C-26EF-4971-8FDD-D44A9B25274F.png" height="1496" width="2684"/></div><div><br/></div><hr/><div><br/></div><div><b>Git Theory</b></div><div><br/></div><div><img src="Web%20Development.html.resources/C64253C0-038A-49F3-8EB1-38B5ED7A298D.png" height="690" width="906"/></div><div><br/></div><div><img src="Web%20Development.html.resources/B781EDEE-0968-4048-8420-8721D90C53E9.png" height="1118" width="1786"/></div><div><br/></div><div><br/></div><hr/><div><br/></div><div> Install heroku, check its version and use “heroku login”. It will take you to the login page.</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></body></html>